EESchema Schematic File Version 2
LIBS:power
LIBS:device
LIBS:switches
LIBS:relays
LIBS:motors
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:inverter-controller
LIBS:inverter-controller-cache
EELAYER 25 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 2 19
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L PIC32MK1024MCF064 U1
U 1 1 5AEC26E4
P 6550 3800
F 0 "U1" H 6550 2100 60  0000 C CNN
F 1 "PIC32MK1024MCF064" H 6600 5450 60  0000 C CNN
F 2 "" H 5850 3800 60  0001 C CNN
F 3 "" H 5850 3800 60  0001 C CNN
	1    6550 3800
	1    0    0    -1  
$EndComp
$Comp
L Crystal Y1
U 1 1 5AEC26EB
P 9900 4550
F 0 "Y1" H 9900 4700 50  0000 C CNN
F 1 "12MHz" H 9900 4400 50  0000 C CNN
F 2 "" H 9900 4550 50  0001 C CNN
F 3 "" H 9900 4550 50  0001 C CNN
	1    9900 4550
	0    -1   -1   0   
$EndComp
$Comp
L C C7
U 1 1 5AEC26F2
P 10100 4350
F 0 "C7" H 10125 4450 50  0000 L CNN
F 1 "8p" H 10125 4250 50  0000 L CNN
F 2 "" H 10138 4200 50  0001 C CNN
F 3 "" H 10100 4350 50  0001 C CNN
	1    10100 4350
	0    1    1    0   
$EndComp
$Comp
L C C8
U 1 1 5AEC26F9
P 10100 4750
F 0 "C8" H 10125 4850 50  0000 L CNN
F 1 "8p" H 10125 4650 50  0000 L CNN
F 2 "" H 10138 4600 50  0001 C CNN
F 3 "" H 10100 4750 50  0001 C CNN
	1    10100 4750
	0    1    1    0   
$EndComp
$Comp
L R R2
U 1 1 5AEC2700
P 9700 4350
F 0 "R2" V 9780 4350 50  0000 C CNN
F 1 "1k" V 9700 4350 50  0000 C CNN
F 2 "" V 9630 4350 50  0001 C CNN
F 3 "" H 9700 4350 50  0001 C CNN
	1    9700 4350
	0    1    1    0   
$EndComp
$Comp
L GND #PWR15
U 1 1 5AEC2707
P 10300 4550
F 0 "#PWR15" H 10300 4300 50  0001 C CNN
F 1 "GND" H 10300 4400 50  0000 C CNN
F 2 "" H 10300 4550 50  0001 C CNN
F 3 "" H 10300 4550 50  0001 C CNN
	1    10300 4550
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR4
U 1 1 5AEC270D
P 3550 3050
F 0 "#PWR4" H 3550 2800 50  0001 C CNN
F 1 "GND" H 3550 2900 50  0000 C CNN
F 2 "" H 3550 3050 50  0001 C CNN
F 3 "" H 3550 3050 50  0001 C CNN
	1    3550 3050
	0    1    1    0   
$EndComp
$Comp
L C C2
U 1 1 5AEC2713
P 3700 3150
F 0 "C2" H 3725 3250 50  0000 L CNN
F 1 "0.1u" H 3725 3050 50  0000 L CNN
F 2 "" H 3738 3000 50  0001 C CNN
F 3 "" H 3700 3150 50  0001 C CNN
	1    3700 3150
	0    -1   -1   0   
$EndComp
$Comp
L +5V #PWR5
U 1 1 5AEC271A
P 3550 3250
F 0 "#PWR5" H 3550 3100 50  0001 C CNN
F 1 "+5V" H 3550 3390 50  0000 C CNN
F 2 "" H 3550 3250 50  0001 C CNN
F 3 "" H 3550 3250 50  0001 C CNN
	1    3550 3250
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR8
U 1 1 5AEC2720
P 3550 4650
F 0 "#PWR8" H 3550 4400 50  0001 C CNN
F 1 "GND" H 3550 4500 50  0000 C CNN
F 2 "" H 3550 4650 50  0001 C CNN
F 3 "" H 3550 4650 50  0001 C CNN
	1    3550 4650
	0    1    1    0   
$EndComp
$Comp
L C C4
U 1 1 5AEC2726
P 3700 4750
F 0 "C4" H 3725 4850 50  0000 L CNN
F 1 "0.1u" H 3725 4650 50  0000 L CNN
F 2 "" H 3738 4600 50  0001 C CNN
F 3 "" H 3700 4750 50  0001 C CNN
	1    3700 4750
	0    -1   -1   0   
$EndComp
$Comp
L +5V #PWR9
U 1 1 5AEC272D
P 3550 4850
F 0 "#PWR9" H 3550 4700 50  0001 C CNN
F 1 "+5V" H 3550 4990 50  0000 C CNN
F 2 "" H 3550 4850 50  0001 C CNN
F 3 "" H 3550 4850 50  0001 C CNN
	1    3550 4850
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR13
U 1 1 5AEC2733
P 9700 3050
F 0 "#PWR13" H 9700 2800 50  0001 C CNN
F 1 "GND" H 9700 2900 50  0000 C CNN
F 2 "" H 9700 3050 50  0001 C CNN
F 3 "" H 9700 3050 50  0001 C CNN
	1    9700 3050
	0    -1   -1   0   
$EndComp
$Comp
L C C5
U 1 1 5AEC2739
P 9550 2950
F 0 "C5" H 9575 3050 50  0000 L CNN
F 1 "0.1u" H 9575 2850 50  0000 L CNN
F 2 "" H 9588 2800 50  0001 C CNN
F 3 "" H 9550 2950 50  0001 C CNN
	1    9550 2950
	0    1    1    0   
$EndComp
$Comp
L +5V #PWR12
U 1 1 5AEC2740
P 9700 2850
F 0 "#PWR12" H 9700 2700 50  0001 C CNN
F 1 "+5V" H 9700 2990 50  0000 C CNN
F 2 "" H 9700 2850 50  0001 C CNN
F 3 "" H 9700 2850 50  0001 C CNN
	1    9700 2850
	0    1    1    0   
$EndComp
$Comp
L GND #PWR7
U 1 1 5AEC2746
P 3550 4150
F 0 "#PWR7" H 3550 3900 50  0001 C CNN
F 1 "GND" H 3550 4000 50  0000 C CNN
F 2 "" H 3550 4150 50  0001 C CNN
F 3 "" H 3550 4150 50  0001 C CNN
	1    3550 4150
	0    1    -1   0   
$EndComp
$Comp
L C C3
U 1 1 5AEC274C
P 3700 4050
F 0 "C3" H 3725 4150 50  0000 L CNN
F 1 "0.1u" H 3725 3950 50  0000 L CNN
F 2 "" H 3738 3900 50  0001 C CNN
F 3 "" H 3700 4050 50  0001 C CNN
	1    3700 4050
	0    -1   1    0   
$EndComp
$Comp
L +5V #PWR6
U 1 1 5AEC2753
P 3550 3950
F 0 "#PWR6" H 3550 3800 50  0001 C CNN
F 1 "+5V" H 3550 4090 50  0000 C CNN
F 2 "" H 3550 3950 50  0001 C CNN
F 3 "" H 3550 3950 50  0001 C CNN
	1    3550 3950
	0    -1   1    0   
$EndComp
$Comp
L GND #PWR10
U 1 1 5AEC2759
P 9350 4550
F 0 "#PWR10" H 9350 4300 50  0001 C CNN
F 1 "GND" H 9350 4400 50  0000 C CNN
F 2 "" H 9350 4550 50  0001 C CNN
F 3 "" H 9350 4550 50  0001 C CNN
	1    9350 4550
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR14
U 1 1 5AEC275F
P 9900 5000
F 0 "#PWR14" H 9900 4750 50  0001 C CNN
F 1 "GND" H 9900 4850 50  0000 C CNN
F 2 "" H 9900 5000 50  0001 C CNN
F 3 "" H 9900 5000 50  0001 C CNN
	1    9900 5000
	0    -1   -1   0   
$EndComp
$Comp
L C C6
U 1 1 5AEC2765
P 9700 5000
F 0 "C6" H 9725 5100 50  0000 L CNN
F 1 "0.1u" H 9725 4900 50  0000 L CNN
F 2 "" H 9738 4850 50  0001 C CNN
F 3 "" H 9700 5000 50  0001 C CNN
	1    9700 5000
	0    1    1    0   
$EndComp
$Comp
L +5V #PWR11
U 1 1 5AEC276C
P 9400 4850
F 0 "#PWR11" H 9400 4700 50  0001 C CNN
F 1 "+5V" H 9400 4990 50  0000 C CNN
F 2 "" H 9400 4850 50  0001 C CNN
F 3 "" H 9400 4850 50  0001 C CNN
	1    9400 4850
	0    1    1    0   
$EndComp
$Comp
L R R1
U 1 1 5AEC2772
P 1350 1750
F 0 "R1" V 1430 1750 50  0000 C CNN
F 1 "10k" V 1350 1750 50  0000 C CNN
F 2 "" V 1280 1750 50  0001 C CNN
F 3 "" H 1350 1750 50  0001 C CNN
	1    1350 1750
	-1   0    0    1   
$EndComp
$Comp
L C C1
U 1 1 5AEC2779
P 1350 2150
F 0 "C1" H 1375 2250 50  0000 L CNN
F 1 "0.1u" H 1375 2050 50  0000 L CNN
F 2 "" H 1388 2000 50  0001 C CNN
F 3 "" H 1350 2150 50  0001 C CNN
	1    1350 2150
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR2
U 1 1 5AEC2780
P 1350 2350
F 0 "#PWR2" H 1350 2100 50  0001 C CNN
F 1 "GND" H 1350 2200 50  0000 C CNN
F 2 "" H 1350 2350 50  0001 C CNN
F 3 "" H 1350 2350 50  0001 C CNN
	1    1350 2350
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR1
U 1 1 5AEC2786
P 1350 1550
F 0 "#PWR1" H 1350 1400 50  0001 C CNN
F 1 "+5V" H 1350 1690 50  0000 C CNN
F 2 "" H 1350 1550 50  0001 C CNN
F 3 "" H 1350 1550 50  0001 C CNN
	1    1350 1550
	1    0    0    -1  
$EndComp
Wire Wire Line
	9250 4750 9950 4750
Wire Wire Line
	9900 4750 9900 4700
Wire Wire Line
	9850 4350 9950 4350
Wire Wire Line
	9900 4400 9900 4350
Connection ~ 9900 4350
Wire Wire Line
	10250 4350 10250 4750
Wire Wire Line
	10250 4550 10300 4550
Connection ~ 10250 4550
Connection ~ 9900 4750
Wire Wire Line
	3550 3050 3550 3150
Wire Wire Line
	3850 3150 4000 3150
Wire Wire Line
	4000 3050 3550 3050
Wire Wire Line
	3900 3150 3900 3250
Connection ~ 3900 3150
Wire Wire Line
	3550 4650 3550 4750
Wire Wire Line
	3850 4750 4000 4750
Wire Wire Line
	4000 4650 3550 4650
Wire Wire Line
	3900 4750 3900 4850
Connection ~ 3900 4750
Wire Wire Line
	3900 4850 3550 4850
Wire Wire Line
	3900 3250 3550 3250
Wire Wire Line
	9700 3050 9700 2950
Wire Wire Line
	9250 2950 9400 2950
Wire Wire Line
	9250 3050 9700 3050
Wire Wire Line
	9350 2950 9350 2850
Connection ~ 9350 2950
Wire Wire Line
	9350 2850 9700 2850
Wire Wire Line
	3550 4150 3550 4050
Wire Wire Line
	3850 4050 4000 4050
Wire Wire Line
	4000 4150 3550 4150
Wire Wire Line
	3900 4050 3900 3950
Connection ~ 3900 4050
Wire Wire Line
	3900 3950 3550 3950
Wire Wire Line
	9550 4350 9550 4650
Wire Wire Line
	9550 4650 9250 4650
Wire Wire Line
	9350 4550 9250 4550
Wire Wire Line
	9900 5000 9850 5000
Wire Wire Line
	9400 5000 9550 5000
Wire Wire Line
	9400 5000 9400 4850
Wire Wire Line
	9400 4850 9250 4850
Wire Wire Line
	1350 2300 1350 2350
Wire Wire Line
	1350 1900 1350 2000
Wire Wire Line
	1350 1600 1350 1550
Text Label 3800 2350 2    60   ~ 0
VA+
Wire Wire Line
	3600 2350 4000 2350
Text Label 3800 2450 2    60   ~ 0
VA-
Wire Wire Line
	3600 2450 4000 2450
Wire Wire Line
	9250 2650 9700 2650
Wire Wire Line
	9250 2550 9700 2550
Wire Wire Line
	9250 2450 9700 2450
Wire Wire Line
	9250 2350 9700 2350
Text HLabel 9700 2350 2    60   Input ~ 0
VB-
Text HLabel 9700 2450 2    60   Input ~ 0
VB+
Text HLabel 9700 2550 2    60   Input ~ 0
VC-
Text HLabel 9700 2650 2    60   Input ~ 0
VC+
Text HLabel 3600 2350 0    60   Input ~ 0
VA+
Text HLabel 3600 2450 0    60   Input ~ 0
VA-
Text HLabel 3300 2550 0    60   Input ~ 0
I_A_SENSE
Text HLabel 3300 2650 0    60   Input ~ 0
I_B_SENSE
Text HLabel 3300 2750 0    60   Input ~ 0
I_C_SENSE
Text HLabel 3300 4450 0    60   Input ~ 0
V_DC_SENSE
Text HLabel 3300 4350 0    60   Input ~ 0
THROTTLE
Text HLabel 9800 3750 2    60   Input ~ 0
FAULT
Wire Wire Line
	9800 3750 9250 3750
Text HLabel 9800 3850 2    60   Input ~ 0
FAULT_CLEAR
Wire Wire Line
	9800 3850 9250 3850
Text HLabel 3300 3450 0    60   Input ~ 0
SPEED_A
Text HLabel 3300 3550 0    60   Input ~ 0
SPEED_B
Text HLabel 3300 4950 0    60   Input ~ 0
MOTOR_TEMP_A
Text HLabel 3300 5050 0    60   Input ~ 0
MOTOR_TEMP_B
Text HLabel 9800 3350 2    60   Input ~ 0
PRECHARGE_CONTACTOR
Text HLabel 9800 3450 2    60   Input ~ 0
MAIN_CONTACTOR
Wire Wire Line
	4000 3450 3300 3450
Wire Wire Line
	3300 3550 4000 3550
Text Label 3950 3450 2    60   ~ 0
QEA1
Text Label 3950 3550 2    60   ~ 0
QEB1
Text Label 3950 3650 2    60   ~ 0
HOME1
Text Label 3950 3950 2    60   ~ 0
QEICMP1
Wire Wire Line
	4000 3950 3950 3950
Text Label 3950 3850 2    60   ~ 0
INDX1
$Comp
L GND #PWR3
U 1 1 5AEFD8E9
P 3350 3650
F 0 "#PWR3" H 3350 3400 50  0001 C CNN
F 1 "GND" H 3350 3500 50  0000 C CNN
F 2 "" H 3350 3650 50  0001 C CNN
F 3 "" H 3350 3650 50  0001 C CNN
	1    3350 3650
	0    1    1    0   
$EndComp
Text Notes 1150 4200 0    60   ~ 0
QEA1,QEB1,INDX1,HOME1\nmake up QEI1 inputs.\n\nQEICMP1 is the QEI1 output (ignored).\n\nHOME and INDX are set to ground, since\nwe only care about RPM. POSCNT resets\nare managed by the controller software.
Wire Wire Line
	4000 4350 3300 4350
Wire Wire Line
	3300 4450 4000 4450
Wire Wire Line
	3300 4950 4000 4950
Wire Wire Line
	4000 5050 3300 5050
Text Label 3550 2850 2    60   ~ 0
!MCLR
Wire Wire Line
	3550 2850 4000 2850
Text Label 1500 1950 0    60   ~ 0
!MCLR
Wire Wire Line
	3300 2550 4000 2550
Wire Wire Line
	4000 2650 3300 2650
Wire Wire Line
	3300 2750 4000 2750
Wire Wire Line
	3350 3650 4000 3650
Wire Wire Line
	3650 3850 4000 3850
Wire Wire Line
	3650 3850 3650 3650
Connection ~ 3650 3650
Wire Wire Line
	1500 1950 1350 1950
Connection ~ 1350 1950
Wire Wire Line
	9800 3350 9250 3350
Wire Wire Line
	9800 3450 9250 3450
$EndSCHEMATC
